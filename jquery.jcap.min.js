(function(a){a.fn.jCaps=function(d){var c={transcriptsDiv:null,language:"en",showCaptions:false,switchOnCallback:function(){},switchOffCallback:function(){}};if(d){a.extend(c,d)}function e(){var g=[];if(c.transcriptsDiv!==null){c.transcriptsDiv.hide();var h=a(d.transcriptsDiv).children('div[lang="'+c.language+'"]').find("span");for(i=0;i<h.length;++i){g[i]=[];var f=a(h[i]);g[i][0]=f.text();g[i][1]=f.attr("data-begin");g[i][2]=f.attr("data-end")}return g}return false}var b=e();this.each(function(){a(this).css("position","relative");var f=a("<div/>",{id:"captions",width:this.width,css:{display:"none"}});a("<p>").appendTo(f);a(this).after(f);a(this).bind("timeupdate",function(){var g=this.currentTime;a.each(b,function(j,h){if(g>=h[1]&&g<=h[2]){a("#captions").text(h[0]);return true}});if(c.showCaptions){if(a("div#captions").is(":hidden")){a("div#captions").show();c.switchOnCallback()}}else{if(!a("div#captions").is(":hidden")){a("div#captions").hide();c.switchOffCallback()}}})});arguments.callee.toggle=function(){c.showCaptions=!c.showCaptions};arguments.callee.switchOn=function(){c.showCaptions=true};arguments.callee.switchOff=function(){c.showCaptions=false};arguments.callee.switchLanguage=function(f){c.language=f;b=e()};arguments.callee.swapOut=function(){c.transcriptsDiv.show();c.transcriptsDiv.children().show();c.transcriptsDiv.children("div").not('div[lang="'+c.language+'"]').hide()};return this}})(jQuery);